{{!
}}
<section
  class="tab region-{{tab.id}} {{tab.cssClass}}"
  data-tab="{{tab.id}}"
  data-group="{{tab.group}}"
>
  <div class="control control--xp-table">
    <table class="xp-table sticky-table">
      <thead>
        <tr>
          <th rowspan="2">{{localize
              "FACTIONS.templates.characterClass.advancement.level"
            }}</th>
          <th rowspan="2">{{localize
              "FACTIONS.templates.characterClass.advancement.xp"
            }}</th>
          <th rowspan="2">{{localize
              "FACTIONS.templates.characterClass.advancement.hd"
            }}</th>
          <th rowspan="2">{{localize
              "FACTIONS.templates.characterClass.advancement.thac0"
            }}</th>
          <th rowspan="2">{{localize
              "FACTIONS.templates.characterClass.advancement.conMod"
            }}</th>
          <th colspan="5">{{localize
              "FACTIONS.templates.characterClass.advancement.saves"
            }}</th>
        </tr>
        <tr>
          <th>D</th>
          <th>W</th>
          <th>P</th>
          <th>B</th>
          <th>S</th>
        </tr>
      </thead>

      <tbody>
        {{#each data.system.xp as |levelObj index|}}
          <tr>
            <td>{{add index 1}}</td>
            <td>
              <input
                type="text"
                data-dtype="Number"
                class="xp-field xp-field--xp"
                name="system.xp.{{index}}.value"
                value="{{levelObj.value}}"
              />
            </td>
            <td>
              <span class="flexrow">
                <input
                  type="text"
                  data-dtype="Number"
                  class="xp-field xp-field--"
                  name="system.xp.{{index}}.hd.count"
                  value="{{levelObj.hd.count}}"
                />
                d{{@root.document.system.hitDieSize}}+
                <input
                  type="text"
                  data-dtype="Number"
                  class="xp-field xp-field--"
                  name="system.xp.{{index}}.hd.modifier"
                  value="{{levelObj.hd.modifier}}"
                />
              </span>
            </td>
            <td>
              <span class="flexrow">
                <input
                  type="text"
                  data-dtype="Number"
                  class="xp-field xp-field--"
                  name="system.xp.{{index}}.thac0"
                  value="{{levelObj.thac0}}"
                />
                (+
                <input
                  type="text"
                  data-dtype="Number"
                  class="xp-field xp-field--"
                  name="system.xp.{{index}}.attackBonus"
                  value="{{levelObj.attackBonus}}"
                />
                )
              </span>
            </td>
            <td>
              <input
                type="checkbox"
                name="system.xp.{{index}}.hd.canUseConMod"
                data-tooltip="{{localize
                  'FACTIONS.templates.characterClass.advancement.conMod'
                }}"
                aria-label="{{localize
                  'FACTIONS.templates.characterClass.advancement.conMod'
                }}"
                {{checked levelObj.hd.canUseConMod}}
              />
            </td>
            <td>
              <input
                type="text"
                data-dtype="Number"
                class="xp-field xp-field--"
                name="system.xp.{{index}}.saves.death"
                value="{{levelObj.saves.death}}"
              />
            </td>
            <td>
              <input
                type="text"
                data-dtype="Number"
                class="xp-field xp-field--"
                name="system.xp.{{index}}.saves.wands"
                value="{{levelObj.saves.wands}}"
              />
            </td>
            <td>
              <input
                type="text"
                data-dtype="Number"
                class="xp-field xp-field--"
                name="system.xp.{{index}}.saves.paralysis"
                value="{{levelObj.saves.paralysis}}"
              />
            </td>
            <td>
              <input
                type="text"
                data-dtype="Number"
                class="xp-field xp-field--"
                name="system.xp.{{index}}.saves.breath"
                value="{{levelObj.saves.breath}}"
              />
            </td>
            <td>
              <input
                type="text"
                data-dtype="Number"
                class="xp-field xp-field--"
                name="system.xp.{{index}}.saves.spell"
                value="{{levelObj.saves.spell}}"
              />
            </td>
          </tr>
        {{else}}
          <tr>
            <td colspan="10">
              <p class="empty">{{localize
                  "FACTIONS.templates.characterClass.empty.advamcement"
                }}</p>
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>

  <footer class="tab-controls flexrow">
    <button type="button" class="add-level"><i class="fas fa-plus"></i>
      {{localize "FACTIONS.templates.characterClass.advancement.add"}}</button>
    <button type="button" class="remove-level"><i class="fas fa-minus"></i>
      {{localize
        "FACTIONS.templates.characterClass.advancement.remove"
      }}</button>
  </footer>
</section>
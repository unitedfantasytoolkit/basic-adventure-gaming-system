<li class="chat-message chat-message--bags chat-message--{{message.type}} message flexcol {{cssClass}}" data-message-id="{{message._id}}">
  {{> "chat-cards/partials/action-header"}}

  <div class="action">
    {{#if (eq action.outcome.length 1)}}
      {{> "chat-cards/partials/action-attempt"}}
    {{/if}}

    <div class="action__context">
      {{> "chat-cards/partials/action-icons"}}
      <h1>{{localize action.details.name}}</h1>
      {{#if (and action.actor (eq action.outcome.length 1))}}
        <p class="action__attempt-flavor">
          {{getActionFlavorText action message}}
        </p>
      {{/if}}
    </div>

    <div class="action__result">
      {{#unless (and message.blind (not isGM))}}
        {{#if (lte action.outcome.length 1)}}
          {{> actionEffectTargetsNoneOrOne action=action}}
        {{else}}
          {{> actionEffectTargetsMany}}
        {{/if}}
      {{else}}
        <p class="action__result__flavor action__result__flavor--blind">
          {{getBlindFlavorText action}}
        </p>
      {{/unless}}
    </div>
  </div>

  <footer class="action__footer">
    {{#if action.details.flags.usesAttempt}}
      {{> "chat-cards/partials/action-attempt-details"}}
    {{/if}}
    {{#if action.details.flags.usesEffect}}
      {{> "chat-cards/partials/action-effects"}}
    {{/if}}
  </footer>
</li>

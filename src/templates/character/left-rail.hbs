<section class="left-rail">
  {{#each classes}}
  <article
    class="character-class"
    aria-label="Level {{system.level}} {{name}}"
  >
    <div class="character-class__name">
        <img
          src="{{img}}"
          class="document-art"
          alt=""
        />
        Lv. {{system.level}} {{name}}
    </div>
    <uft-character-info-meter
      value="{{xpBar.current}}"
      max="{{xpBar.max}}"
      class="xp"
    >
      <i slot="icon" class="fa fa-trophy"></i>
    </uft-character-info-meter>
  </article>
  {{/each}}
  <article class="meters">
    <uft-character-info-meter
      value="{{actor.system.hp.value}}"
      max="{{actor.system.hp.max}}"
      class="hp"
    >
      <i
        slot="icon"
        class="fa fa-heart"
      ></i>
    </uft-character-info-meter>

    {{{ encumbranceMeter }}}
  </article>
  <div class="character-tiles">
    {{#if (eq actor.type "character")}}
      <div class="number-showcase">
        <ul class="number-showcase__list">
          {{#each actor.system.schema.fields.base.fields.abilityScores}}
          <li data-tooltip="{{lookup ../abilityScoreTooltips name}}">
            <span class="number-showcase__label">{{localize (replace this.label "Label" "Short") }}</span>
            <span class="number-showcase__value">{{lookup ../this.actor.system.base.abilityScores name}}</span>
          </li>
           {{/each}}
        </ul>
      </div>
    {{/if}}

    <dl>
      {{#if (eq actor.type "monster")}}
        {{#with actor.system.hp.hitDice}}
          {{#if usesHitDice}}
            <dt>Hit Dice</dt>
            <dd>{{count}}d{{size}}{{ifThen modifier (signNumber modifier) ""}}</dd>
          {{/if}}
        {{/with}}
      {{/if}}
      {{#if usesDescendingAC}}
      <dt>THAC0</dt>
      <dd>{{actor.system.thac0}}</dd>
      {{else}}
      <dt>Attack Bonus</dt>
      <dd>{{signNumber actor.system.baseAttackBonus forceSign=true}}</dd>
      {{/if}}

      <dt>Armor Class</dt>
      <dd>{{actor.system.armorClass}}</dd>

      <dt class="movement">Movement</dt>
      {{#if (eq actor.type "character")}}
        <dd>
          {{actor.system.speed.exploration}}/{{actor.system.speed.encounter}}/{{actor.system.speed.overland}}
        </dd>
      {{else}}
        <dd>
          {{actor.system.speed.exploration}} ({{actor.system.speed.encounter}})
        </dd>  
      {{/if}}
    </dl>

    {{#if (eq actor.type "character")}}
    <div class="combat">
      <header>
        <h3>Modifiers</h3>
        <span>Atk</span>
        <span>Dmg</span>
      </header>

      <dl>
        <dt>Melee</dt>
        <dd>{{signNumber actor.system.meleeAttackBonus forceSign=true}}</dd>
        <dd>{{signNumber actor.system.meleeDamageBonus forceSign=true}}</dd>
        <dt>Missile</dt>
        <dd>{{signNumber actor.system.missileAttackBonus forceSign=true}}</dd>
        <dd>{{signNumber actor.system.missileDamageBonus forceSign=true}}</dd>
      </dl>
    </div>
    {{/if}}

    <div class="defenses">
      <h3>Saving Throws</h3>
      <dl>
        {{#each savingThrowLocaleStrings as |save key|}}
          <dt data-tooltip="{{lookup ../savingThrowTooltips key}}">{{localize save.short}}</dt>
          <dd>{{lookup ../actor.system.savingThrows key}}</dd>
        {{/each}}
        {{#if (eq actor.type "character")}}
          <dt>Bonus vs. Magic</dt>
          <dd>
            {{signNumber actor.system.abilityScores.wis.magicSave forceSign=true}}
          </dd>
        {{/if}}


        {{#if (eq actor.type "monster")}}
          <dt>Magic Resistance</dt>
          <dd>75%</dd>      
        {{/if}}
      </dl>
    </div>

    
    {{#if (eq actor.type "monster")}}
      <dl>
          <dt>Alignment</dt>
          <dd>{{ifThen actor.system.biographicalDetails.alignment actor.system.biographicalDetails.alignment "Unaligned"}}</dd>

          <dt>Intelligence</dt>
          <dd>Superhuman</dd>       
        
          <dt>No. Appearing</dt>
          <dd>1d6 (3d6)</dd>

          <dt>Morale Rating</dt>
          <dd>{{actor.system.morale.value}}</dd>


      </dl>
    {{/if}}

    {{#if actor.system.retainer.isRetainer}}
      <dl>
        <dt>Employed by</dt>
        <dd>{{actor.system.retainer.employer}}</dd>
        
        {{#if actor.system.retainer.wage.quantity}}
          <dt>Wage</dt>
          <dd>{{actor.system.retainer.wage.quantity}}/month</dd>
        {{/if}}
      </dl>
    {{/if}}
  </div>

  {{#if (eq actor.type "character")}}
  <div class="character-tiles">
    <h3>Actions</h3>
    <ul class="character-actions">
      {{#each actor.system.actions}}
      <li
        data-tooltip="{{name}}"
        data-action="use-character-action"
        data-action-id="{{id}}"
      >
        <img
          src="{{img}}"
          alt="{{localize name}}"
        />
      </li>
      {{/each}}
    </ul>
  </div>
  {{/if}}
</section>
